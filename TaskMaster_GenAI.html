<html>
    <head><meta charset="utf-8"></head><head></head><body>
    <input id="input" type="text">
    <button onclick="getTasksFromGroq()">add</button>
    <ol id="list"></ol>

    <script>
      const input = document.getElementById("input");
      const list = document.getElementById("list");
      function addTask() {
        const newLi = document.createElement("li");

        newLi.innerHTML =
          input.value + ' <button onclick="deleteTask(event)">Del</button>';
        list.appendChild(newLi);
        input.value = "";
      }

      function deleteTask(event) {
        console.log(event.target.parentElement.remove());
      }

      async function getTasksFromGroq() {
        const response = await fetch(
          "https://api.groq.com/openai/v1/chat/completions",
          {
            method: "post",
            headers: {
              "Content-Type": "application/json",
              Authorization:
                "bearer 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",
            },
            body: JSON.stringify({
              messages: [
                {
                  role: "system",
                  content:
                    "You are task creator who generates array of string for task based on user query\nExample - User asks - I want to learn javascript\nresult - { 'tasks': ['Learn basic of variable', 'control flows', 'so on']} in json\n",
                },
                {
                  role: "user",
                  content: input.value,
                },
              ],
              model: "llama-3.3-70b-versatile",
              temperature: 1,
              max_completion_tokens: 1024,
              top_p: 1,
              stream: false,
              response_format: {
                type: "json_object",
              },
              stop: null,
            }),
          }
        );
        const body = await response.json();
        console.log(body.choices[0].message.content);
        const tasks = JSON.parse(body.choices[0].message.content).tasks;
        tasks.forEach((task) => {
          const newLi = document.createElement("li");

          newLi.innerHTML =
            task + ' <button onclick="deleteTask(event)">Del</button>';
          list.appendChild(newLi);
        });
      }
    </script>
  
</body></html>